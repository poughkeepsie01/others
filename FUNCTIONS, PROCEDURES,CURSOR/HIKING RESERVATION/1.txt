CREATE OR REPLACE PROCEDURE TIPKT.HIKE_RESERVE_LIST_CONFIRM (
   T_NUM NUMBER)
IS
   
V_NUM_OF_JOINERS VARCHAR2(30);
V_MOUNTAIN_PICK VARCHAR2(30);
V_DOWNPAYMENT VARCHAR2(30);
V_SLOTS NUMBER;
BEGIN


   
    UPDATE HIKE_RESERVATION
    SET STATUS= 'CONFIRMED', DOWNPAYMENT= 'Y'
       WHERE  TRANSACTION_NUM = T_NUM;
    
     SELECT NUM_OF_JOINERS, MOUNTAIN_PICK
        INTO V_NUM_OF_JOINERS, V_MOUNTAIN_PICK
        FROM HIKE_RESERVATION
       WHERE  TRANSACTION_NUM = T_NUM;
       
  
      UPDATE HIKE_RESERVATION_LIST
         SET SLOTS = SLOTS - V_NUM_OF_JOINERS
       WHERE MOUNTAIN = V_MOUNTAIN_PICK;
       COMMIT;
       
 
       

END;
